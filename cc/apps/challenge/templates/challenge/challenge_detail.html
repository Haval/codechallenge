{% extends 'base.html' %}

{% block contents %}

	<aside id="participant_info" class="pull-right">
	{% for p in participant %}
		<h3>Stats</h3>
		<ul class="list-unstyled">
			<li>{{ owner.coder.webname }} is the owner</li>
			<li>You've been working on this challenge since {{ p.date_joined }}</li>
			<li>
				<div class="progress">
					<div class="progress-bar" role="progressbar" aria-valuenow="" aria-valuemin="0" aria-valuemax="100" style="width: {{ p.percent_complete }}%">
						<span>{{ p.days_left|floatformat:2 }} days left</span>
					</div>
				</div>
			</li>
		</ul>
	{% endfor %}
	</aside>

	<header>
		<h1>{{ object.name }}</h1>
	</header>

	{% if user.is_authenticated and not already_joined %}
	<a class="btn btn-primary btn-lg" href="{% url 'challenge:join' object.id %}">Join this challenge</a>
	{% endif %}

	{% if user.is_authenticated and already_joined %}
	<a class="btn btn-primary btn-lg" href="{% url 'challenge:leave' object.id %}">Leave this challenge</a>
	{% endif %}

	{% if object.coder_set.count > 0 %}
	<h3>Coders on this challenge</h3>
	<ul>
		{% for coder in object.coder_set.all %}
		<li><a href="{% url 'coder:profile' coder.user.username %}">{{coder}}</a></li>
		{% endfor %}
	</ul>
	{% endif %}

	<h3>Rules</h3>

	<ul>
	{% for rule in object.rule_set.all %}
		<li>{{rule}}</li>
	{% endfor %}
	</ul>

{% endblock %}